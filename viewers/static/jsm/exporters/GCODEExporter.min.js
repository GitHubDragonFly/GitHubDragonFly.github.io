import{DefaultLoadingManager}from"three";import Polyslice from"https://cdn.jsdelivr.net/npm/@jgphilpott/polyslice@25.12.8/dist/index.browser.esm.js";class GcodeExporter{constructor(e){this.manager=e||DefaultLoadingManager}parse(e,r,o,t={}){this.parseAsync(e,r,o,t)}async parseAsync(e,r,o,t={}){if(void 0===Polyslice){if(alert("Polyslice library failed to load.\n\nCheck your network connection."),"function"==typeof o)return o("THREE.GCODEExporter: Polyslice library failed to load!"),null;throw new Error("THREE.GCODEExporter: Polyslice library failed to load!")}t=Object.assign({printer:"Ender3",filament:"GenericPLA"},t);const n=new Polyslice.Printer(t.printer),i=new Polyslice.Filament(t.filament),l=new Polyslice({printer:n,filament:i});let s=0,a="";if(e.updateMatrixWorld(!0,!0),e.traverse(function(e){if(e.isMesh&&e.geometry){s++;const r=e.clone();a+=l.slice(r)+"\n"}}),0===s){if("function"==typeof o)return o("THREE.GCODEExporter: No qualifying objects found!"),null;throw new Error("THREE.GCODEExporter: No qualifying objects found!")}if("function"!=typeof r)return a;r(a)}}export{GcodeExporter};