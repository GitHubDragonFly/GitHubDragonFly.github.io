import{DefaultLoadingManager}from"three";import Polyslice from"https://cdn.jsdelivr.net/npm/@jgphilpott/polyslice@25.12.8/dist/index.browser.esm.js";class GcodeExporter{constructor(e){this.manager=e||DefaultLoadingManager}parse(e,r,o,t={}){this.parseAsync(e,r,o,t)}async parseAsync(e,r,o,t={}){if(void 0===Polyslice){if(alert("Polyslice library failed to load.\n\nCheck your network connection."),"function"==typeof o)return o("THREE.GCODEExporter: Polyslice library failed to load!"),null;throw new Error("THREE.GCODEExporter: Polyslice library failed to load!")}t=Object.assign({printer:"Ender3",filament:"GenericPLA"},t);const n=new Polyslice.Printer(t.printer),i=new Polyslice.Filament(t.filament),l=new Polyslice({printer:n,filament:i});let a=0,s="";if(e.updateMatrixWorld(!0,!0),e.traverse(function(e){if(e.isMesh&&e.geometry){a++;const r=e.clone();s+=l.slice(r)+"\n"}}),0===a||0===s.trim().length){if("function"==typeof o)return o("THREE.GCODEExporter: No qualifying objects found or G-code generation failed!"),null;throw new Error("THREE.GCODEExporter: No qualifying objects found or G-code generation failed!")}if("function"!=typeof r)return s;r(s)}}export{GcodeExporter};