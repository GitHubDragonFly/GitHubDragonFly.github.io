import{DefaultLoadingManager}from"three";import Polyslice from"https://cdn.jsdelivr.net/npm/@jgphilpott/polyslice@25.12.8/dist/index.browser.esm.js";class GcodeExporter{constructor(manager){this.manager=manager||DefaultLoadingManager}parse(scene,onDone,onError,options={}){this.parseAsync(scene,onDone,onError,options)}async parseAsync(scene,onDone,onError,options={}){try{if(void 0===Polyslice)return void alert("Polyslice library failed to load.\n\nCheck your network connection.")}catch(error){return alert("Polyslice external library is required!"),void console.log(error)}options=Object.assign({printer:"Ender3",filament:"GenericPLA"},options);const printer=new Polyslice.Printer(options.printer),filament=new Polyslice.Filament(options.filament),slicer=new Polyslice({printer:printer,filament:filament});let mesh_count=0,gcode="";if(scene.traverse(function(object){object.isMesh&&(mesh_count++,gcode=slicer.slice(object))}),0===mesh_count){if("function"==typeof onError)return onError("THREE.GCODEExporter: No qualifying objects found!"),null;throw new Error("THREE.GCODEExporter: No qualifying objects found!")}if("function"!=typeof onDone)return gcode;onDone(gcode)}}export{GcodeExporter};